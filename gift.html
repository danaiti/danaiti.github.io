<!DOCTYPE html>
<html>
  <head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
     <h1>Một món quà nhỏ ngày 20/10</h1>
<!--     <form> -->
      <p>Nhập số điện thoại</p> <input type = "text" name ="sdt" id = "sdt"/>

      <p>Nhập tên</p> <input type = "ten" name = "ten" id = "ten" />
      <p></p>
      <button id="submitPost" type="submit" class="btn btn-light">Submit</button>
<!--     </form> -->

  </body>
				       
<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-database.js"></script>

<script>
  const firebaseConfig = {
  apiKey: "AIzaSyBvA_yGfD-fnXAZSK08MTN-L3wewV4q6rY",
  authDomain: "present-95fda.firebaseapp.com",
  databaseURL: "https://present-95fda-default-rtdb.firebaseio.com",
  projectId: "present-95fda",
  storageBucket: "present-95fda.appspot.com",
  messagingSenderId: "993517595069",
  appId: "1:993517595069:web:f4b691ca0f3356e6a5cad4",
  measurementId: "G-K1Q8QVJ3GY"
};
firebase.initializeApp(firebaseConfig);
</script>

<script>
    document.getElementById("submitPost").addEventListener("click", writeNewPost);
    function writeNewPost() {
	let ten = document.getElementById("ten").value;
	let sdt = document.getElementById("sdt").value;
	let giftArr = ['20K', '30K', '50K', '100K'];
	let index = Math.floor(Math.random() * 101);
	let gift = index != 100 ? index % 3 : 4;
	const today = new Date(Date.now());
	let time = today.toUTCString();
      var postData = {
        "Name": ten,
	"Phone": sdt,
	"Gift" : giftArr[gift],
	"Time" : time
      };

	var ref = firebase.database().ref('GiftList');
      	var newPostKey = ref.push().key

	var updates = {};
	updates[newPostKey] = postData;
	ref.update(updates);
	window.alert("Chúc mừng bạn nhận được thẻ <b>" + giftArr[gift] + "</b>");
   }
</script>
</html>
